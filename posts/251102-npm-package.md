---
title: "日本語特化の入力補正ライブラリ「textfit jp」を開発しました"
date: "2025-11-02"
excerpt: "JSライブラリを作って学んだこと備忘録"
---

日本語の入力を簡単に正規化できる**textfit jp**というTypeScript/JavaScriptライブラリを作りました。

表示の統一化、データベース保存前の標準化など、フォーム入力の正規化などで活用できます。

https://github.com/tmk-st/textfit

この記事はライブラリ自体ではなく、開発過程で学んだことについての備忘録です。

***

## 開発のきっかけ
きっかけはこちらの記事です。
https://zenn.dev/kyome/articles/10bed29cc08c35

こちらの記事であるように”小さく始める”には何がいいか考え、バリデーションではない「日本語特化の入力補助ライブラリ」を開発することにしました。

## テスト設計

今回のようなスコープの小さなライブラリは、テスト設計〜実装までの流れを学ぶ題材として最適でした。
先述した記事でも紹介されているように、機能が限定され、入力と出力が明確なため、テストケースを整理しやすいという特徴があります。

具体的には、

* 単体テスト
* 実際の利用シナリオを想定した結合テスト
* 入力の揺れを考慮したエッジケーステスト

をバランス良く実装でき、どこまでを正規化の対象とするか、どの状況でエラーとするかといった仕様の判断にもつながりました。

また、一部テストケースをAIに生成させたことで、自分だけでは気づけなかったパターンを補完でき、“都合のいいテスト”を書きにくくなるという点で有効でした。

## MITライセンス
ライブラリの公開にあたり、ライセンスを設定する必要があります。
これは「このコードをどの範囲で自由に使っていいか」を明示するためのものです。

今回はOSS界隈では定番かなと思い、MITライセンスを選びました。
再配布、改変、商用利用までOKという、かなり自由度の高いものです。

他にもいろいろ種類があり、例えば

- Apache 2.0：特許まわりの保護が厚い
- GPL：ソースコードを公開したまま利用してほしい方向け

など、用途や考え方によって選び方はいろいろあるようです。

設定方法はGitHubのリポジトリ作成時に該当箇所で「MIT」を選ぶだけで、`LICENSE`ファイルもちゃんと用意してくれます。

## npmパッケージとして公開する
パッケージを公開したい場合はnpmに登録・ログインし、公開する必要があります。

手順は簡単で、
```bash
npm login
```
とするとブラウザに遷移するので、未登録の場合はここで登録・ログインを完了します。
```bash
npm publish
```
そしてこれだけで公開は完了です。

```bash
npm search textfit-jp（ライブラリ名）
```
これで検索し、確認することができます。

## おまけ１：Tree-shaking
余談ですが、開発の過程で「Tree-Shaking」という呼称を知りました。

以下のようにライブラリの関数をimportすることで、JavaScriptのバンドル時に使われていないコードを自動的に削除する技術です。

```javascript
import { normalizePhone, normalizeEmail } from 'textfit';
```

使用方法はもちろん知っていましたが、Tree-Shakingという名前であることは初めて知りました。

## おまけ２：npmの公式キャラ（？）
さらに余談ですが、npm登録画面にいたキャラクターが、ホバーすると画像のように目を閉じるアニメーション + `cursor: grab;`で頭を撫でているようなUIになって可愛かったです🐿️

![](../251102-npm.png =250x)

***

よければライブラリぜひ活用していただけたら嬉しいです。

issueも大歓迎です！
